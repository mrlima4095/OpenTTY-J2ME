#!/bin/lua

local libcore = {}

function libcore.joinpath(pwd)
    if pwd == nil or pwd == "" or pwd == "." then
        return os.getcwd()
    elseif string.sub(pwd, 1, 1) == "/" then
        return pwd
    end
    
    -- Adiciona barra se necessário - VERSÃO DEBUG
    local cwd = os.getcwd()
    print("DEBUG: cwd = '" .. cwd .. "'")
    print("DEBUG: pwd = '" .. pwd .. "'")
    
    if string.sub(cwd, -1) ~= "/" then
        cwd = cwd .. "/"
    end
    
    local result = cwd .. pwd
    print("DEBUG: result = '" .. result .. "'")
    return result
end

return libcore