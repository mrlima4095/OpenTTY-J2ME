#!/bin/sh

local previous = graphics.getCurrent()
local screen = graphics.new("screen", "OpenTTY " .. os.getenv("VERSION"))
local back = graphics.new("command", { label = "Back", type = "screen", priority = 1 })
local run = graphics.new("command", { label = "Run", type = "ok", priority = 1 })

os.setproc("name", "sudo")

graphics.append(screen, { type = "field", })
graphics.addCommand(screen, back)
graphics.addCommand(screen, run)
graphics.handler(screen, {
    [back] = function ()
        graphics.display(previous)
        os.exit(0)
    end,
    [run] = function (passwd)
        local status = java.sudo(passwd)
        
    end
})
graphics.display(screen)