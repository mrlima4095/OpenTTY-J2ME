#!/bin/lua

local function shell(command)
    command = string.trim(command)
    local mainCommand = string.getCommand(command)
    local argument, args = string.getArgument(command), string.split()
    
    if mainCommand == "" then
    elseif io.open("/bin/" .. mainCommand) then
        local res = io.popen("/bin/" .. mainCommand, argument, false, io.stdout)
        return res.status
    elseif mainCommand == "env" then
    elseif mainCommand == "echo" then
        print(argument)
    else
        print(mainCommand .. ": not found")
        return 127
    end

    return 0
end

local cmd = {}
for i=1,#arg - 1 do
    cmd[i] = arg[i]
end

os.exit(shell(table.concat(cmd, " ")))