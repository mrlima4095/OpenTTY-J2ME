#!/bin/lua

local function shell(args, enable, aliases, scope)
    local cmd, argument = string.getCommand(args), string.getArgument(args)
    args = string.split(argument, nil)

    if cmd == "" then
    elseif aliases[cmd] and enable then
        return shell(aliases[cmd] .. " " .. argument, enable, aliases, scope)
    elseif io.open("/bin/" .. cmd) then
        if argument == "" then
        else
            local res = io.popen("/bin/" .. cmd, argument, false, io.stdout)
            return res.status
        end
    elseif cmd == "exit" then os.exit(nil)
    elseif cmd == "eval" then
        if argument == "" then
        else
            print(shell(argument))
        end
    elseif cmd == "echo" then print(argument)
    elseif cmd == "clear" then
        graphics.setText(io.stdout, "")
    
    -- Basic

    -- 


    else
        print(cmd .. ": not found")
        return 127
    end

    return 0
end

return shell