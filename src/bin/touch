#!/bin/lua

local function joinpath(pwd)
    if string.sub(pwd, 1, 1) ~= "/" then
        return os.getcwd() .. pwd
    end
    return pwd
end

if #arg > 1 then
    for i = 1, #arg - 1 do
        local file = arg[i]

        if string.sub(file, 1, 1) ~= "/" then file = os.getcwd() .. file end

        local status = io.write(file, "", "w")
        
        if status == 1 then
            print("touch: " .. arg[i] .. ": java.io.IOException")
        elseif status == 5 then
            print("touch: " .. arg[i] .. ": read-only storage")
        elseif status == 13 then
            print("touch: " .. arg[i] .. ": permission denied")
        elseif status == 127 then
            print("touch: " .. arg[i] .. ": not found")
        end

        if status > 0 then
            os.exit(tonumber(status))
        end
    end
else
    print("touch: missing operand")
    os.exit(2)
end